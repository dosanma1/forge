<!-- Dialog Content -->
<div
	class="fixed left-[50%] top-[50%] z-50 w-full max-w-lg translate-x-[-50%] translate-y-[-50%] bg-white rounded-lg shadow-lg border border-gray-200"
>
	<!-- Header -->
	@if (showHeader()) {
		<div class="flex items-center justify-between p-6 pb-4">
			@if (title()) {
				<h2 class="text-xl font-semibold text-gray-900">
					{{ title() }}
				</h2>
			}
			<button
				mmcConfirmationDialogClose
				class="text-gray-400 hover:text-gray-600 transition-colors"
			>
				<mmc-icon name="lucideX" class="h-5 w-5" />
				<span class="sr-only">Close</span>
			</button>
		</div>
	}

	<!-- Content -->
	<div class="px-6 pb-6 space-y-4">
		@if (description()) {
			<p class="text-gray-600 text-sm mb-2">
				{{ description() }}
			</p>
		}

		<!-- Warning Section (only show for destructive variants) -->
		@if (variant() === 'destructive') {
			<mmc-alert variant="error">
				<mmc-icon
					size="sm"
					name="lucideTriangleAlert"
					class="mr-2 text-destructive"
				></mmc-icon>
				Warning: This action cannot be undone. This will permanently
				remove all associated data and cannot be recovered.
			</mmc-alert>
		}

		<!-- Confirmation Input Section -->
		@if (requireConfirmation()) {
			<div class="space-y-3">
				@if (confirmationLabel()) {
					<p class="text-sm text-gray-700">
						{{ confirmationLabel() }}
					</p>
				}
				<div>
					<input
						mmcInput
						type="text"
						[(ngModel)]="userInput"
						[placeholder]="confirmationPlaceholder()"
						class="w-full"
						[class.border-red-500]="
							userInput() !== confirmationValue() &&
							userInput().length > 0
						"
						[class.border-green-500]="
							userInput() === confirmationValue() &&
							userInput().length > 0
						"
					/>
					@if (
						userInput().length > 0 &&
						userInput() !== confirmationValue()
					) {
						<p class="text-xs text-red-600 mt-1">
							Please enter "{{ confirmationValue() }}" to confirm
						</p>
					}
				</div>
			</div>
		}

		@if (component()) {
			<ng-container *ngComponentOutlet="component()" />
		} @else {
			<ng-content />
		}
	</div>

	<!-- Footer -->
	@if (showFooter()) {
		<div
			class="flex justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-lg border-t border-gray-200"
		>
			<button
				mmcButton
				[mmcConfirmationDialogClose]="false"
				variant="outline"
				class="px-4 py-2"
			>
				{{ cancelText() }}
			</button>
			<button
				mmcButton
				[mmcConfirmationDialogClose]="isConfirmEnabled() ? true : null"
				[variant]="
					variant() === 'destructive' ? 'destructive' : 'default'
				"
				[disabled]="!isConfirmEnabled()"
				class="px-4 py-2"
			>
				{{ confirmText() }}
			</button>
		</div>
	}
</div>
