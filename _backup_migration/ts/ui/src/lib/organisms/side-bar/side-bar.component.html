<div class="group flex flex-auto flex-col overflow-hidden z-10 bg-inherit">
	@if (collapsible()) {
		<button
			mmcButton
			variant="outline"
			size="icon"
			class="h-6 w-6 group-hover:flex bg-background rounded-full absolute -right-3 top-3 duration-300"
			[ngClass]="{ 'hidden rotate-180': !isOpened }"
			(click)="sidebarService.toggle()"
		>
			<mmc-icon size="sm" name="lucideChevronLeft" />
		</button>
	}

	<div
		class="flex items-center justify-start h-12 min-h-12 border-b border-border duration-300 px-4"
	>
		<!-- Content header -->
		@if (isOpened) {
			<ng-content select="[sideBarContentHeaderExpanded]"></ng-content>
		} @else {
			<ng-content select="[sideBarContentHeaderCollapsed]"></ng-content>
		}
	</div>

	<nav #menu class="bg-inherit flex-auto flex flex-col overflow-hidden">
		<!-- Scrollable Menu -->
		<ul
			role="list"
			class="flex flex-col flex-1 [overflow:overlay] justify-start gap-y-0.5 py-2 space-y-[1px] px-4"
		>
			@for (item of navigation(); track item.id) {
				@switch (item.type) {
					@case ('group') {
						<mmc-group [item]="item"></mmc-group>
					}
					@case ('collapsable') {
						<mmc-collapsable [item]="item"></mmc-collapsable>
					}
					@case ('basic') {
						<mmc-basic [item]="item"></mmc-basic>
					}
				}
			}
		</ul>

		<!-- Footer (Always at Bottom, Pushes First <ul> to Scroll) -->
		<ul
			role="list"
			class="bg-inherit gap-y-0.5 pt-2 space-y-[1px] px-4 last:pb-2 flex-shrink-0"
		>
			@for (item of footer(); track item.id) {
				<mmc-basic [item]="item"></mmc-basic>
			}
		</ul>
	</nav>
</div>
